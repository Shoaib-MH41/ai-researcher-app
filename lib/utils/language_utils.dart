import 'package:flutter/material.dart';
import 'package:intl/intl.dart';

/// ğŸŒ Language Utility â€” Supports Urdu, Arabic, and English
class LanguageUtils {
  // âœ… ØªÙ…Ø§Ù… Ø³Ù¾ÙˆØ±Ù¹Úˆ Ø²Ø¨Ø§Ù†ÙˆÚº Ú©ÛŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
  static List<Map<String, dynamic>> getSupportedLanguages() {
    return [
      {
        'code': 'english',
        'name': 'English',
        'nativeName': 'English',
        'flag': 'ğŸ‡ºğŸ‡¸',
        'color': 0xFF2196F3, // Blue
        'font': 'OpenSans',
      },
      {
        'code': 'urdu',
        'name': 'Urdu',
        'nativeName': 'Ø§Ø±Ø¯Ùˆ',
        'flag': 'ğŸ‡µğŸ‡°',
        'color': 0xFF4CAF50, // Green
        'font': 'NotoNastaliqUrdu',
      },
      {
        'code': 'arabic',
        'name': 'Arabic',
        'nativeName': 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
        'flag': 'ğŸ‡¸ğŸ‡¦',
        'color': 0xFFFF9800, // Orange
        'font': 'Amiri',
      },
    ];
  }

  // âœ… Ø²Ø¨Ø§Ù† Ú©Û’ Ú©ÙˆÚˆ Ø³Û’ readable Ù†Ø§Ù… Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº
  static String getLanguageName(String code) {
    return getSupportedLanguages()
            .firstWhere((lang) => lang['code'] == code, orElse: () => {'name': 'English'})['name'] ??
        'English';
  }

  // âœ… Ø²Ø¨Ø§Ù† Ú©Ø§ Native Ù†Ø§Ù… (Ø¬ÛŒØ³Û’ Ø§Ø±Ø¯ÙˆØŒ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)
  static String getNativeLanguageName(String code) {
    return getSupportedLanguages()
            .firstWhere((lang) => lang['code'] == code, orElse: () => {'nativeName': 'English'})['nativeName'] ??
        'English';
  }

  // âœ… PDF Ø§ÙˆØ± UI Headers Ú©Û’ Ù„ÛŒÛ’ ØªØ±Ø¬Ù…Û Ø´Ø¯Û Ù…ÙˆØ§Ø¯
  static Map<String, String> getPDFHeaders(String language) {
    switch (language.toLowerCase()) {
      case 'urdu':
        return {
          'title': 'Ø·Ø¨ÛŒ ØªØ­Ù‚ÛŒÙ‚Ø§ØªÛŒ Ø±Ù¾ÙˆØ±Ù¹',
          'topic': 'Ù…ÙˆØ¶ÙˆØ¹',
          'date': 'ØªØ§Ø±ÛŒØ®',
          'hypothesis': 'ØªØ­Ù‚ÛŒÙ‚ÛŒ Ù…ÙØ±ÙˆØ¶Û',
          'methodology': 'Ø·Ø±ÛŒÙ‚Û Ú©Ø§Ø± / ØªØ¬Ø±Ø¨Ø§ØªÛŒ Ø¹Ù…Ù„',
          'labResults': 'Ù„ÛŒØ¨Ø§Ø±Ù¹Ø±ÛŒ Ù†ØªØ§Ø¦Ø¬',
          'conclusion': 'Ù†ØªÛŒØ¬Û Ø§ÙˆØ± Ù…Ø´Ø§ÛØ¯Ø§Øª',
          'footer': 'ÛŒÛ Ø±Ù¾ÙˆØ±Ù¹ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø°ÛØ§Ù†Øª Ú©Û’ Ù…ÛŒÚˆÛŒÚ©Ù„ Ø±ÛŒØ³Ø±Ú† Ø³Ø³Ù¹Ù… Ú©Û’ Ø°Ø±ÛŒØ¹Û’ ØªÛŒØ§Ø± Ú©ÛŒ Ú¯Ø¦ÛŒ ÛÛ’Û”',
        };

      case 'arabic':
        return {
          'title': 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø·Ø¨ÙŠ',
          'topic': 'Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹',
          'date': 'Ø§Ù„ØªØ§Ø±ÙŠØ®',
          'hypothesis': 'Ø§Ù„ÙØ±Ø¶ÙŠØ© Ø§Ù„Ø¨Ø­Ø«ÙŠØ©',
          'methodology': 'Ø§Ù„Ù…Ù†Ù‡Ø¬ÙŠØ© ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø¨',
          'labResults': 'Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø®ØªØ¨Ø±',
          'conclusion': 'Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬ ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª',
          'footer': 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø·Ø¨ÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.',
        };

      default:
        return {
          'title': 'MEDICAL RESEARCH REPORT',
          'topic': 'TOPIC',
          'date': 'DATE',
          'hypothesis': 'RESEARCH HYPOTHESIS',
          'methodology': 'METHODOLOGY / EXPERIMENTAL PROCESS',
          'labResults': 'LAB RESULTS',
          'conclusion': 'CONCLUSION & OBSERVATIONS',
          'footer': 'Generated by AI Medical Research System.',
        };
    }
  }

  // âœ… ØªØ§Ø±ÛŒØ® Ú©Ùˆ Ø²Ø¨Ø§Ù† Ú©Û’ Ù„Ø­Ø§Ø¸ Ø³Û’ ÙØ§Ø±Ù…ÛŒÙ¹ Ú©Ø±ÛŒÚº
  static String formatDate(DateTime date, String language) {
    switch (language.toLowerCase()) {
      case 'urdu':
        return DateFormat('dd MMMM yyyy', 'ur').format(date); // Ù…Ø«Ù„Ø§Ù‹: 4 Ù†ÙˆÙ…Ø¨Ø± 2025
      case 'arabic':
        return DateFormat('dd MMMM yyyy', 'ar').format(date); // Ù…Ø«Ù„Ø§Ù‹: 4 Ù†ÙˆÙÙ…Ø¨Ø± 2025
      default:
        return DateFormat('dd MMMM yyyy', 'en').format(date); // e.g. 4 November 2025
    }
  }

  // âœ… Text Direction (RTL / LTR) â€” UI Ù…ÛŒÚº Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©ÛŒÙ„Ø¦Û’
  static TextDirection getTextDirection(String language) {
    switch (language.toLowerCase()) {
      case 'urdu':
      case 'arabic':
        return TextDirection.rtl;
      default:
        return TextDirection.ltr;
    }
  }

  // âœ… ÙÙˆÙ†Ù¹ ÙÛŒÙ…Ù„ÛŒ (UI Ø§ÙˆØ± PDF Ø¯ÙˆÙ†ÙˆÚº Ú©Û’ Ù„ÛŒÛ’)
  static String getFontFamily(String language) {
    switch (language.toLowerCase()) {
      case 'urdu':
        return 'NotoNastaliqUrdu';
      case 'arabic':
        return 'Amiri';
      default:
        return 'OpenSans';
    }
  }

  // âœ… Ø±Ù†Ú¯ Ø§ÙˆØ± ÙÙ„ÛŒÚ¯ Ø¢Ø³Ø§Ù†ÛŒ Ø³Û’ Ø­Ø§ØµÙ„ Ú©Ø±Ù†Û’ Ú©ÛŒÙ„Ø¦Û’
  static Color getLanguageColor(String language) {
    final lang = getSupportedLanguages()
        .firstWhere((e) => e['code'] == language, orElse: () => {'color': 0xFF2196F3});
    return Color(lang['color']);
  }

  static String getFlag(String language) {
    final lang = getSupportedLanguages()
        .firstWhere((e) => e['code'] == language, orElse: () => {'flag': 'ğŸŒ'});
    return lang['flag'];
  }

  // âœ… Ø²Ø¨Ø§Ù† Ú©Ùˆ Normalize Ú©Ø±Ùˆ
  static String normalize(String input) {
    return input.toLowerCase().trim();
  }
}
